(()=>{new Swiper(".swiper-portfolio",{loop:!0,speed:500,navigation:{nextEl:".slider-btn--next",prevEl:".slider-btn--prev"},breakpoints:{0:{slidesPerView:1,spaceBetween:15},780:{slidesPerView:2,spaceBetween:40},1180:{slidesPerView:3,spaceBetween:40}}}),new Swiper(".swiper-reviews",{loop:!0,speed:500,slidesOffsetBefore:-window.innerWidth/8,breakpoints:{0:{slidesPerView:1.2,centeredSlides:!0,spaceBetween:15,slidesOffsetBefore:0},980:{centeredSlides:!1,slidesPerView:3,spaceBetween:15},1440:{spaceBetween:40,slidesPerView:4}}});const e=document.querySelector(".header__burger"),t=document.querySelector(".header__controls"),o=document.querySelectorAll(".header__nav-item");e.addEventListener("click",(()=>{e.classList.toggle("header__burger--active"),t.classList.toggle("header__controls--active")})),o.forEach((o=>{o.addEventListener("click",(o=>{const c=o.target.closest(".header__nav-item");c&&function(e){const t=document.getElementById(e);if(t){const e=window.innerWidth<1440?90:120,o=t.getBoundingClientRect().top+window.pageYOffset-e;window.scrollTo({top:o,behavior:"smooth"})}}(c.getAttribute("section-id")),t.classList.remove("header__controls--active"),e.classList.remove("header__burger--active")}))}));let c=document.querySelectorAll(".tab__item");c.forEach((e=>{const t=e.querySelector(".tab__item-text");e.addEventListener("click",(()=>{c.forEach((t=>{const o=t.querySelector(".tab__item-text");t!==e&&(t.classList.remove("tab__item--active"),o.style.maxHeight="0")})),e.classList.toggle("tab__item--active"),e.classList.contains("tab__item--active")?(t.style.maxHeight=`${t.scrollHeight+40}px`,setTimeout((()=>{t.style.maxHeight="unset"}),400)):t.style.maxHeight="0"}))})),document.addEventListener("scroll",(function(e){A();const t=document.querySelectorAll(".work-process__item"),o=window.innerHeight,c=window.scrollY;t.forEach((e=>{const n=e.getBoundingClientRect().top+c;c+o-200>=n&&(t.forEach((e=>e.classList.remove("work-process__item--active"))),e.classList.add("work-process__item--active"))}))}));const n=document.querySelectorAll('input[name="phone"]');let s=[];function i(e,t,o){let c=e.value.trim();return!(""===c||!t.test(c))||(function(e){let t=e.closest(".form-block__item");t.classList.add("input-error"),e.addEventListener("input",(function(){let o=e.value.trim(),c=e.closest("form");e===c.querySelector('input[name="name"]')&&/^[a-zA-Zа-яА-Я]{2,15}$/.test(o)&&t.classList.remove("input-error"),e===c.querySelector('input[name="email"]')&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o)&&t.classList.remove("input-error");const i=Array.from(n).indexOf(e);i>-1&&s[i].isValidNumber()&&t.classList.remove("input-error")}))}(e),!1)}function r(){document.querySelectorAll(".input-error").forEach((e=>e.classList.remove("input-error")))}function a(){const e=document.getElementById("notification-error");clearTimeout(window.successCloseTimer),e&&(e.classList.remove("active"),setTimeout((()=>{e.classList.remove("prepare")}),100))}function l(){const e=document.getElementById("notification-success");e&&(e.classList.add("prepare"),setTimeout((()=>{e.classList.add("active")}),100),window.successCloseTimer=setTimeout((()=>{d()}),5e3))}function d(){const e=document.getElementById("notification-success");clearTimeout(window.successCloseTimer),e&&(e.classList.remove("active"),setTimeout((()=>{e.classList.remove("prepare")}),100))}n.forEach((e=>{let t=window.intlTelInput(e,{initialCountry:"auto",geoIpLookup:function(e){fetch("https://ipinfo.io/json",{cache:"reload"}).then((e=>e.json())).then((t=>e(t.country))).catch((()=>e("us")))},utilsScript:"https://cdn.jsdelivr.net/npm/intl-tel-input@24.4.0/build/js/utils.js",allowDropdown:!0,autoHideDialCode:!1,separateDialCode:!0});s.push(t)})),[document.querySelector("#form-page"),document.querySelector("#form-cta"),document.querySelector("#form-calc")].forEach((e=>{e.addEventListener("submit",(t=>{t.preventDefault();let o=e.querySelector('input[name="name"]'),c=e.querySelector('input[name="email"]'),n=(e.querySelector('input[name="phone"]'),!0);if(r(),i(o,/^[a-zA-Zа-яА-Я]{2,15}$/)||(n=!1),i(c,/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/)||(n=!1),n){const t=Object.fromEntries(new FormData(e).entries());t.interest=[],e.querySelectorAll("input[type='checkbox']").forEach((e=>{e.checked&&t.interest.push(e.value)})),grecaptcha.execute("6LfBVU0nAAAAAORPhJVusD5Jx8eoC--Y5gFPHV9P",{action:"submit"}).then((function(o){console.log(o);var c=new XMLHttpRequest;c.open("POST","https://api.garno.tech/landing/leads/web-leads-form",!0),c.setRequestHeader("Content-Type","application/json"),c.setRequestHeader("x-api-key","Yu6rkH97Hk9299s76k7gYTBhUe3RZApzBG44Pv36v7JS5cFSP799yiKucpvg2Eb5"),c.setRequestHeader("recaptcha",o),c.onreadystatechange=function(){if(4===c.readyState)try{JSON.parse(c.responseText).status?(e.reset(),r(),l(),document.querySelector(".modal--active").classList.remove("modal--active"),document.body.style.overflow="auto"):function(){const e=document.getElementById("notification-error");e&&(e.classList.add("prepare"),setTimeout((()=>{e.classList.add("active")}),100),window.successCloseTimer=setTimeout((()=>{a()}),5e3))}()}catch(e){l()}},c.send(JSON.stringify({...t,language:window.SelectedLanguage}))}))}}))})),document.getElementById("notification-error-close").addEventListener("click",(e=>{a()})),document.getElementById("notification-success-close").addEventListener("click",(e=>{d()}));const u=document.querySelectorAll('[data-modal="modal_cta"]'),m=document.querySelector(".modal--consultation"),p=document.querySelector(".modal--calc"),f=document.querySelectorAll('[data-modal="modal_calc"]'),y=document.querySelectorAll(".btn__modal-close"),v=document.querySelectorAll('[data-modal="modal_lang"]'),h=document.querySelector(".modal--lang");function w(o,c){o.forEach((o=>{o.addEventListener("click",(()=>{document.querySelector(".header__controls--active")&&(t.classList.remove("header__controls--active"),e.classList.remove("header__burger--active")),c.classList.add("modal--active"),document.body.style.overflow="hidden"}))}))}w(u,m),w(f,p),w(v,h),y.forEach((e=>{e.addEventListener("click",(()=>{document.querySelector(".modal--active").classList.remove("modal--active"),document.body.style.overflow="auto"}))}));let g=document.querySelectorAll(".form-calc .form-block"),_=document.querySelector(".form-calc .btn-primary.btn-primary--green"),S=document.querySelector(".form-calc .btn-primary.btn-primary--disabled"),L=0;function b(){g.forEach((e=>{e.style.display="none"}))}function q(e){g[e].style.display="block"}function E(e){S.style.display=0===e?"none":"flex"}function A(){let e=null;document.querySelectorAll("section").forEach((t=>{const o=t.getBoundingClientRect().top,c=t.offsetHeight;o<=window.innerHeight/2&&o+c>=window.innerHeight/2&&(e=t)})),e&&(document.querySelectorAll(".header__nav-item").forEach((e=>{e.classList.remove("active")})),function(e){const t=document.querySelector(`.header__nav-item[section-id="${e}"]`);t&&t.classList.add("active")}(e.id))}_.addEventListener("click",(()=>{L<g.length-1?(L++,b(),q(L),E(L),_.type="button"):_.type="submit"})),S.addEventListener("click",(()=>{L>0&&(L--,b(),q(L),E(L))})),b(),q(L),E(L),window.onresize=function(){A()}})();